# ä»»æ€§æ¨ - ä¸“å±QQæ¶ˆæ¯æ¨é€æœåŠ¡

æ¬¢è¿ä½¿ç”¨ä»»æ€§æ¨ã€‚

## ä»»æ€§æ¨æ˜¯ä»€ä¹ˆ

ä»»æ€§æ¨æ˜¯ä¸€ä¸ªQQæ¶ˆæ¯æ¨é€æœºå™¨äººå¹³å°ï¼Œç”¨æ¥é€šçŸ¥è‡ªå·±æ¶ˆæ¯çš„å…è´¹æœåŠ¡ã€‚é€šè¿‡è°ƒç”¨APIæ¥å£ï¼Œå®ç°æœºå™¨äººç»™ä½ çš„QQå‘é€æ¶ˆæ¯çš„åŠŸèƒ½ã€‚é€šä¿—æ˜“æ‡‚ç‚¹å°±æ˜¯æœ‰ä»€ä¹ˆé‡è¦é€šçŸ¥éœ€è¦åŠæ—¶çŸ¥é“ï¼Œå¯ä»¥è®©ä»»æ€§æ¨ç¬¬ä¸€æ—¶é—´ç»™ä½ å‘QQæ¶ˆæ¯ã€‚

## ä¸ºä»€ä¹ˆå¼€å‘ä»»æ€§æ¨

æœ‰å¾ˆå¤šçš„å®¢æˆ·ç«¯éƒ½å¯ä»¥åšåˆ°è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚Slackã€‚æœ‰å¾ˆå¤šæˆç†Ÿçš„æ¶ˆæ¯æ¨é€æœåŠ¡ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¿˜è¦å¼€å‘ä¸€ä¸ªå‘¢ï¼Ÿå› ä¸ºå®ƒä»¬æ€»æ˜¯ç»™å¾—å¤ªå¤šå¤ªå¤æ‚ï¼Œæˆ‘éœ€è¦çš„åªæ˜¯ä¸€ä¸ªç®€å•æ¶ˆæ¯é€šçŸ¥è€Œå·²ã€‚ å› ä¸ºæ€»æ²¡æœ‰å¾ˆç®€å•çš„åŠæ³•è¾¾åˆ°æˆ‘è¦æ¨é€æ¶ˆæ¯åˆ°QQçš„ç›®çš„ï¼Œäºæ˜¯ä»»æ€§æ¨è¯ç”Ÿäº†ï¼

- **åªæœ‰ä¸€ä¸ªæ¥å£ï¼ˆåœ¨ä½¿ç”¨æ—¶ï¼‰ï¼š** æ¯æ¬¡è°ƒç”¨æ¥å£ï¼Œæˆ‘ä»¬éƒ½è¦å»è¯»Né•¿çš„APIè¯´æ˜æ–‡æ¡£ï¼Œçœ‹å¾—å¤´æ˜çœ¼èŠ±ã€‚æ‰€ä»¥ä»»æ€§æ¨åªæœ‰ä¸€ä¸ªæ¥å£ï¼Œåªè¦ä¼šè¾“å…¥ç½‘å€ï¼Œå°±èƒ½å®ç°è°ƒç”¨ã€‚
- **ä¸€åˆ†é’Ÿå®Œå·¥ï¼š** æ³¨å†Œè´¦å·æ˜¯å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œç‰¹åˆ«è¿˜è¦æ‰‹æœºçŸ­ä¿¡éªŒè¯ï¼Œæ›´æ˜¯ä»¤å¤§å®¶å¿ƒçƒ¦ã€‚
- **å…å®‰è£…å®¢æˆ·ç«¯ï¼š** å®‰è£…å®¢æˆ·ç«¯å¯¹å¾ˆå¤šç”¨æˆ·æ¥è¯´æ˜¯ä¸€ç§ç—›è‹¦ï¼Œæ‰€ä»¥ç”¨å¤§å®¶å¾ˆå¸¸ç”¨çš„QQæ¥ä½œä¸ºæ¶ˆæ¯æ¨é€æ¸ é“ã€‚

## ä½¿ç”¨åœºæ™¯

ä»»æ€§æ¨æ˜¯ä¸€ä¸ªæœ‰ç€GET/POSTè¯·æ±‚çš„æ¥å£ï¼Œå¯ç¼–ç¨‹æ€§QQæ¶ˆæ¯æ¨é€æœåŠ¡ï¼Œæ‰€ä»¥ä½ å¯ä»¥åˆ›é€ å‡ºå„ç§ç©æ³•æ¥ï¼Œä¾‹å¦‚æ¨é€ç«è½¦æŠ¢ç¥¨é€šçŸ¥ã€æ¨é€åšå®¢è¯„è®ºé€šçŸ¥ç­‰ã€‚

## å¦‚ä½•ä½¿ç”¨

### å®‰è£…å¹¶è¿è¡Œ

**æ³¨æ„ï¼šæœ¬é¡¹ç›®è¦æ±‚æœ€ä½JDKç‰ˆæœ¬ä¸º17**

1. è‡ªè¡Œç¼–è¯‘æˆ–ä¸‹è½½é¢„ç¼–è¯‘å‘å¸ƒç‰ˆæœ¬ã€‚psï¼šReleasesé¡µç‰ˆæœ¬å¯èƒ½ä¸æ˜¯æœ€æ–°ï¼Œæœ€æ–°é¢„ç¼–è¯‘ç‰ˆæœ¬å¯åœ¨[Actions](https://github.com/FlyRenxing/RenxingPush/actions)
   ä¸­çš„`Java CI with Maven`å·¥ä½œæµç¨‹ä¸­çš„`Artifacts`å·¥ä»¶åˆ—è¡¨å†…ä¸‹è½½ã€‚
2. åˆ›å»ºMysqlæ•°æ®åº“ã€‚
3. é‡å‘½å`application.yml.example`ä¸º`application.yml`ï¼Œå¹¶ä¿®æ”¹æ•°æ®åº“ä¿¡æ¯éƒ¨åˆ†ã€‚
4. æ³¨å†Œä¸ªQQå°å·ï¼Œæ·»åŠ åˆ°æ•°æ®åº“é‡Œã€‚
5. è¿è¡Œã€‚
6. é˜…è¯» [APIæ–‡æ¡£](https://flyrenxing.github.io/RenxingPush/) æˆ–è‡ªè¡ŒæŸ¥çœ‹æºç è¿›è¡Œä½¿ç”¨ã€‚ä¸‹é¢æ˜¯Quick Startï¼š
    1. æ³¨å†Œæ¥å£ post `/user/register`
    2. ç™»å½•æ¥å£ post `/user/login`ï¼Œè®°å½•ä¸‹ç™»å½•æ¥å£è¿”å›çš„`cipher`
    4. å‘é€æ¶ˆæ¯æ¥å£post `/msg/send/ä½ çš„cipher`

è‹¥ç™»å½•å‡ºç°é—®é¢˜è¯·å‚é˜… [miraiç™»å½•æ–‡æ¡£](https://docs.mirai.mamoe.net/Bots.html#_2-%E7%99%BB%E5%BD%95)

### å‘é€æ¶ˆæ¯

#### è¯·æ±‚æ–¹å¼

POSTï¼ŒContent-Typeï¼šapplication/jsonã€‚ä¸æ‡‚ï¼Ÿä¸æ‡‚ç™¾åº¦å­¦å»

#### JSONæ ¼å¼å¯¹è±¡:

```json
{
  "content": "æ¶ˆæ¯å†…å®¹",
  "meta": {
    "type": "qqæˆ–qq_group",
    "data": "æ¥æ”¶äºº/ç¾¤å·ç "
  }
}
```

#### æ¶ˆæ¯å†…å®¹å¢å¼º

æ¶ˆæ¯å†…å®¹æ”¯æŒ QQè¡¨æƒ…ï¼Œç¾¤@ï¼Œå›¾ç‰‡ï¼ŒJSONå¡ç‰‡ï¼ŒXMLå¡ç‰‡ã€‚ è¯¦è§[Miraiæ–‡æ¡£-Miraiç ](https://docs.mirai.mamoe.net/Messages.html#mirai-ç )

- **è¡¨æƒ…ç”¨æ³•ï¼š**
    - ç›´æ¥ä½¿ç”¨Emojiè¡¨æƒ…ï¼šğŸ™‚
    - QQåŸç”Ÿè¡¨æƒ…ï¼š`[mirai:face:id]`
        - ä¾‹ï¼šcontent="ä½ å¥½å•Š[mirai:face:1]
          è¿™æ˜¯ä¸€ä¸ªæ’‡å˜´è¡¨æƒ…ã€‚æ›´å¤šè¡¨æƒ…ID [ç‚¹å‡»è¿™é‡Œ](https://github.com/richardchien/coolq-http-api/wiki/è¡¨æƒ…-CQ-ç -ID-è¡¨)æŸ¥çœ‹(ä¸å…¨)
        - æ³¨æ„ï¼šå¦‚æœä½¿ç”¨äº†ä¸å­˜åœ¨çš„è¡¨æƒ…IDï¼Œé‚£ä¹ˆæœ¬æ¬¡æ¨é€çš„æ•´æ¡æ¶ˆæ¯å°†ä¸ä¼šè¢«å‘é€å‡ºå»

- **ç¾¤@ç”¨æ³•ï¼š** @ä¸ªäºº` [mirai:at:$target]`ã€ @å…¨ä½“` [mirai:atall]`
   - ä¾‹ï¼šmsg=ä½ å¥½[mirai:at:1277489864]ï¼Œæˆ‘@äº†ä½ ã€‚
   - æ³¨æ„ï¼šå¦‚æœä½ @çš„QQå·ä¸åœ¨ç¾¤å†…æˆ–è€…éç®¡ç†å‘˜ä½¿ç”¨äº†@å…¨ä½“ï¼Œé‚£ä¹ˆæœ¬æ¬¡æ¨é€çš„æ•´æ¡æ¶ˆæ¯å°†ä¸ä¼šè¢«å‘é€å‡ºå»ï¼Œ@è¯­æ³•ä»…åœ¨æ¨é€ç¾¤æ¶ˆæ¯æ—¶æœ‰æ•ˆã€‚

#### ä»¥ä¸‹æ¥å£æœªå®Œå–„

- **å›¾ç‰‡ç”¨æ³•ï¼š**`@image=å¯è®¿é—®çš„å›¾ç‰‡urlåœ°å€@`
   - ä¾‹ï¼š`content="ä½ å¥½ï¼Œè¿™æ˜¯ç™¾åº¦çš„logoå›¾ç‰‡@image=https://baidu.com/tupian.png@"`
- **JSONå¡ç‰‡ï¼š** å°†å‚æ•°å`content`æ”¹ä¸º`json`ï¼Œå‚æ•°å€¼æ˜¯jsonæ ¼å¼çš„æ–‡æœ¬ï¼Œç„¶åå‘æ¥å£åœ°å€å‘é€POSTè¯·æ±‚å³å¯ã€‚å¦‚æœåŒæ—¶æäº¤äº†msgå’Œjsonä¸¤ä¸ªå‚æ•°ï¼Œä»»æ€§æ¨åªä¼šå‘é€msg
- **XMLå¡ç‰‡ï¼š** å°†å‚æ•°å`content`æ”¹ä¸º`xml`ï¼Œå‚æ•°å€¼æ˜¯xmlæ ¼å¼çš„æ–‡æœ¬ï¼Œç„¶åå‘æ¥å£åœ°å€å‘é€POSTè¯·æ±‚å³å¯ã€‚å¦‚æœåŒæ—¶æäº¤äº†msgå’Œxmlä¸¤ä¸ªå‚æ•°ï¼Œä»»æ€§æ¨åªä¼šå‘é€msg

**æ¶ˆæ¯å†…å®¹å‚æ•°ä¼˜å…ˆçº§ï¼šcontent > json > xml**

## å£°æ˜

### ä¸€åˆ‡å¼€å‘æ—¨åœ¨å­¦ä¹ ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”

- ä»»æ€§æ¨æ˜¯å®Œå…¨å…è´¹ä¸”å¼€æ”¾æºä»£ç çš„è½¯ä»¶ï¼Œä»…ä¾›å­¦ä¹ å’Œå¨±ä¹ç”¨é€”ä½¿ç”¨
- ä»»æ€§æ¨ä¸ä¼šé€šè¿‡ä»»ä½•æ–¹å¼å¼ºåˆ¶æ”¶å–è´¹ç”¨ï¼Œæˆ–å¯¹ä½¿ç”¨è€…æå‡ºç‰©è´¨æ¡ä»¶
- ä»»æ€§æ¨ç”±æ•´ä¸ªå¼€æºç¤¾åŒºç»´æŠ¤ï¼Œå¹¶ä¸æ˜¯å±äºæŸä¸ªä¸ªä½“çš„ä½œå“ï¼Œæ‰€æœ‰è´¡çŒ®è€…éƒ½äº«æœ‰å…¶ä½œå“çš„è‘—ä½œæƒã€‚

### è®¸å¯è¯

```
Copyright (C) 2021-2022 Mamoe Technologies and contributors.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
```

`ä»»æ€§æ¨` é‡‡ç”¨ `AGPLv3` åè®®å¼€æºã€‚ä¸ºäº†æ•´ä¸ªç¤¾åŒºçš„è‰¯æ€§å‘å±•ï¼Œæˆ‘ä»¬**å¼ºçƒˆå»ºè®®**æ‚¨åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š

- **é—´æ¥æ¥è§¦ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºä½¿ç”¨ `Http API` æˆ– è·¨è¿›ç¨‹æŠ€æœ¯ï¼‰åˆ° `ä»»æ€§æ¨` çš„è½¯ä»¶ä½¿ç”¨ `AGPLv3` å¼€æº**
- **ä¸é¼“åŠ±ï¼Œä¸æ”¯æŒä¸€åˆ‡å•†ä¸šä½¿ç”¨**

é‰´äºé¡¹ç›®çš„ç‰¹æ®Šæ€§ï¼Œå¼€å‘å›¢é˜Ÿå¯èƒ½åœ¨ä»»ä½•æ—¶é—´**åœæ­¢æ›´æ–°**æˆ–**åˆ é™¤é¡¹ç›®**ã€‚

## é¸£è°¢

> mirai æ˜¯ä¸€ä¸ªåœ¨å…¨å¹³å°ä¸‹è¿è¡Œï¼Œæä¾› QQ Android åè®®æ”¯æŒçš„é«˜æ•ˆç‡æœºå™¨äººåº“

ç‰¹åˆ«æ„Ÿè°¢ [mirai](https://github.com/mamoe/mirai/) ,æœ¬é¡¹ç›®ç”± [mirai](https://github.com/mamoe/mirai/) æä¾›åº•å±‚æ”¯æŒã€‚

